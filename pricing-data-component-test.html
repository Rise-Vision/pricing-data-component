<html>
  <head>
    <script src="https://unpkg.com/@webcomponents/webcomponentsjs@2.2.10/webcomponents-loader.js"></script>
    <!-- <script src="/node_modules/web-component-tester/browser.js"></script> -->
    <script type="module" src="pricing-data-component.mjs"></script>
    <link rel="stylesheet" href="https://unpkg.com/mocha/mocha.css"></link>
    <script src="https://unpkg.com/simple-mock"></script>
  </head>
  <body style="background-color: black; color: white">
    <pricing-data-component></pricing-data-component>

    <div id="mocha"></div>

    <script src="https://unpkg.com/chai/chai.js"></script>
    <script src="https://unpkg.com/mocha/mocha.js"></script>

    <script class="mocha-init">
      mocha.setup({
        globals: [
          "Polymer",
          "JSCompiler_renameProperty",
          "customElements",
          "HTMLImports"
        ],
        ui: "bdd"
      });

      mocha.checkLeaks();
    </script>
    <script>
      describe("pricing-data-component", ()=>{
        const loadPromise = new Promise(res=>window.addEventListener("load", res));

        simple.mock(window, "fetch").resolveWith(true);

        it("exists", ()=>{
          chai.assert(document.querySelector("pricing-data-component"));
        });

        it("loads pricing at startup", ()=>{
          return loadPromise.then(()=>{
            chai.assert(window.fetch.called);
          });
        })
      })
    </script>
    <script class="mocha-exec">
      mocha.run();
    </script>
    </script>
  </body>
</html>
